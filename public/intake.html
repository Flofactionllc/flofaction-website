<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flo Faction - Client Intake Form &amp; Appointment Scheduling</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    /* Navigation */
    nav {
      background: rgba(15,20,25,0.95);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: white;
    }

    .nav-links {
      display: flex;
      list-style: none;
      gap: 2rem;
    }

    .nav-links a {
      color: white;
      text-decoration: none;
      transition: color 0.3s;
      font-weight: 500;
    }

    .nav-links a:hover {
      color: #64c8ff;
    }

    .container {
      max-width: 1200px;
      margin: 80px auto 0;
      padding-top: 20px;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }

    .header h1 {
      font-size: 36px;
      margin-bottom: 10px;
      font-weight: 700;
    }

    .header p {
      font-size: 18px;
      opacity: 0.95;
    }

    /* Tier Badge */
    .tier-badge {
      display: inline-block;
      padding: 8px 20px;
      border-radius: 25px;
      font-weight: 600;
      font-size: 14px;
      margin-top: 15px;
      animation: pulse 2s infinite;
    }

    .tier-essentials { background: #667eea; color: white; }
    .tier-premium { background: #764ba2; color: white; }
    .tier-elite { background: #f093fb; color: white; }
    .tier-enterprise { background: #00d4ff; color: #0f172a; }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      align-items: start;
    }

    @media (max-width: 1024px) {
      .content {
        grid-template-columns: 1fr;
      }
    }

    .form-section,
    .calendar-section {
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      animation: slideUp 0.6s ease-out;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .form-section h2,
    .calendar-section h2 {
      color: #333;
      margin-bottom: 25px;
      font-size: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .form-section h2 i,
    .calendar-section h2 i {
      color: #667eea;
    }

    .form-group {
      margin-bottom: 20px;
      animation: fadeIn 0.4s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 600;
      font-size: 14px;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="date"],
    input[type="number"],
    select,
    textarea {
      width: 100%;
      padding: 14px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 15px;
      font-family: inherit;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: #fafafa;
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15);
      background: white;
      transform: scale(1.01);
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    @media (max-width: 600px) {
      .form-row {
        grid-template-columns: 1fr;
      }
    }

    button[type="submit"] {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 16px 32px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    button[type="submit"]:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(102, 126, 234, 0.4);
    }

    button[type="submit"]:active {
      transform: translateY(-1px);
    }

    button:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none !important;
    }

    .success-message,
    .error-message {
      display: none;
      padding: 18px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-weight: 600;
      animation: slideDown 0.4s ease-out;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .success-message {
      background: linear-gradient(135deg, #d4edda 0%, #c8e6c9 100%);
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .error-message {
      background: linear-gradient(135deg, #f8d7da 0%, #ffcdd2 100%);
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .required::after {
      content: ' *';
      color: #e74c3c;
    }

    /* Service Description Box */
    .service-description {
      margin-top: 15px;
      padding: 20px;
      background: linear-gradient(135deg, #f0f4ff 0%, #e8eeff 100%);
      border-left: 4px solid #667eea;
      border-radius: 8px;
      display: none;
      animation: expandIn 0.4s ease-out;
    }

    @keyframes expandIn {
      from { opacity: 0; transform: scaleY(0.8); transform-origin: top; }
      to { opacity: 1; transform: scaleY(1); }
    }

    .service-description.show {
      display: block;
    }

    .service-description p {
      color: #333;
      font-size: 14px;
      line-height: 1.7;
      margin: 0;
    }

    .service-description .service-icon {
      font-size: 24px;
      margin-bottom: 10px;
      display: block;
    }

    /* Dynamic Form Fields Container */
    .dynamic-fields {
      margin-top: 25px;
      padding-top: 25px;
      border-top: 2px dashed #e0e0e0;
      display: none;
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .dynamic-fields.show {
      display: block;
    }

    .dynamic-fields h3 {
      color: #667eea;
      font-size: 18px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .field-group {
      background: #f8f9ff;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      border: 1px solid #e8eeff;
      animation: fadeIn 0.4s ease-out;
    }

    .field-group h4 {
      color: #764ba2;
      font-size: 14px;
      margin-bottom: 15px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Option Cards for Sub-Products */
    .option-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
      margin-bottom: 20px;
    }

    .option-card {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .option-card:hover {
      border-color: #667eea;
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
    }

    .option-card.selected {
      border-color: #667eea;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      transform: scale(1.02);
    }

    .option-card i {
      font-size: 24px;
      margin-bottom: 8px;
      display: block;
    }

    .option-card span {
      font-size: 13px;
      font-weight: 600;
    }

    /* Calendar Section */
    .calendar-info {
      background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%);
      border: 2px solid #667eea;
      border-radius: 12px;
      padding: 30px;
      text-align: center;
      margin-bottom: 20px;
    }

    .calendar-info h3 {
      color: #667eea;
      margin-bottom: 15px;
      font-size: 20px;
    }

    .calendar-info p {
      color: #666;
      margin-bottom: 15px;
      font-size: 15px;
      line-height: 1.6;
    }

    .calendar-button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 14px 28px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
      text-decoration: none;
      color: white;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.3s;
    }

    .calendar-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    }

    .working-hours {
      background: #e8f4f8;
      border-left: 4px solid #667eea;
      padding: 20px;
      margin-top: 20px;
      border-radius: 8px;
      font-size: 14px;
      color: #333;
    }

    .working-hours i {
      color: #667eea;
      margin-right: 8px;
    }

    /* Division badges */
    .division-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-left: 10px;
    }

    .badge-hri { background: #10b981; color: white; }
    .badge-flofaction { background: #f59e0b; color: white; }
    .badge-wealth { background: #6366f1; color: white; }
    .badge-digital { background: #ec4899; color: white; }
    .badge-ai { background: #8b5cf6; color: white; }

    /* Loading Spinner */
    .spinner {
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @media (max-width: 768px) {
      nav {
        padding: 0.75rem 1rem;
      }

      .nav-links {
        gap: 1rem;
        font-size: 14px;
      }

      .header h1 {
        font-size: 28px;
      }

      .form-section,
      .calendar-section {
        padding: 25px;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav>
    <div class="logo"><i class="fas fa-bolt"></i> Flo Faction</div>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="insurance.html">Insurance</a></li>
      <li><a href="pricing.html">Pricing</a></li>
      <li><a href="roadmap.html">Roadmap</a></li>
    </ul>
  </nav>

  <div class="container">
    <div class="header">
      <h1><i class="fas fa-rocket"></i> Flo Faction</h1>
      <p>Client Intake Form &amp; Appointment Scheduling</p>
      <div id="tierBadge" class="tier-badge" style="display: none;"></div>
    </div>

    <div class="content">
      <div class="form-section">
        <h2><i class="fas fa-user-edit"></i> Your Information</h2>

        <div id="successMessage" class="success-message">
          <i class="fas fa-check-circle"></i> Thank you! Your intake form has been submitted. We'll be in touch soon.
        </div>
        <div id="errorMessage" class="error-message">
          <i class="fas fa-exclamation-circle"></i> <span id="errorText">There was an error submitting your form. Please try again.</span>
        </div>

        <form id="intakeForm">
          <div class="form-group">
            <label for="serviceType" class="required">What can we help you with?</label>
            <select id="serviceType" name="serviceType" required>
              <option value="">-- Select a Product or Service --</option>

              <optgroup label="HRI Insurance (Auto, Home, Property)">
                <option value="auto-insurance">Auto Insurance</option>
                <option value="home-insurance">Home Insurance</option>
                <option value="property-casualty">Property &amp; Casualty Insurance</option>
                <option value="renters-insurance">Renters Insurance</option>
                <option value="umbrella-insurance">Umbrella Insurance</option>
              </optgroup>

              <optgroup label="Flo Faction Insurance (Life, Health, Medicare)">
                <option value="life-insurance">Life Insurance</option>
                <option value="health-insurance">Health Insurance (ACA/Marketplace)</option>
                <option value="medicare">Medicare Plans</option>
                <option value="disability-insurance">Disability Insurance</option>
                <option value="supplemental-insurance">Supplemental Insurance</option>
              </optgroup>

              <optgroup label="Wealth Management">
                <option value="financial-planning">Financial Planning</option>
                <option value="investment-strategies">Investment Strategies</option>
                <option value="retirement-planning">Retirement Planning (401k/IRA)</option>
                <option value="portfolio-management">Portfolio Management</option>
                <option value="legacy-planning">Legacy &amp; Estate Planning</option>
              </optgroup>

              <optgroup label="Digital Services">
                <option value="web-development">Website Development</option>
                <option value="software-development">Software Development</option>
                <option value="creative-services">Creative Services</option>
                <option value="brand-development">Brand Development</option>
              </optgroup>

              <optgroup label="AI &amp; Automation">
                <option value="ai-automation">AI &amp; Business Automation</option>
                <option value="voice-ai">Voice AI Agents</option>
                <option value="crm-integration">CRM Integration</option>
              </optgroup>

              <optgroup label="Other">
                <option value="emergency">Emergency Consultation</option>
                <option value="other">Other / General Inquiry</option>
              </optgroup>
            </select>

            <div id="serviceDescription" class="service-description">
              <span class="service-icon"></span>
              <p id="descriptionText"></p>
            </div>
          </div>

          <!-- Dynamic Fields Container -->
          <div id="dynamicFields" class="dynamic-fields">
            <!-- Content populated by JavaScript -->
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="firstName" class="required">First Name</label>
              <input type="text" id="firstName" name="firstName" required placeholder="Enter your first name">
            </div>
            <div class="form-group">
              <label for="lastName" class="required">Last Name</label>
              <input type="text" id="lastName" name="lastName" required placeholder="Enter your last name">
            </div>
          </div>

          <div class="form-group">
            <label for="email" class="required">Email Address</label>
            <input type="email" id="email" name="email" required placeholder="your@email.com">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input type="tel" id="phone" name="phone" placeholder="(555) 123-4567">
            </div>
            <div class="form-group">
              <label for="dateOfBirth">Date of Birth</label>
              <input type="date" id="dateOfBirth" name="dateOfBirth">
            </div>
          </div>

          <div class="form-group">
            <label for="contactPreference">Preferred Contact Method</label>
            <select id="contactPreference" name="contactPreference">
              <option value="email">Email</option>
              <option value="phone">Phone Call</option>
              <option value="text">Text/SMS</option>
              <option value="whatsapp">WhatsApp</option>
            </select>
          </div>

          <div class="form-group">
            <label for="message">Tell us about your needs</label>
            <textarea id="message" name="message" placeholder="Share any details about your goals, current situation, or questions..."></textarea>
          </div>

          <button type="submit" id="submitBtn">
            <span id="submitText">Submit &amp; Schedule Appointment</span>
            <div id="submitSpinner" class="spinner" style="display: none;"></div>
          </button>
        </form>
      </div>

      <div class="calendar-section">
        <h2><i class="fas fa-calendar-alt"></i> Schedule Your Appointment</h2>

        <div class="calendar-info">
          <h3><i class="fas fa-clock"></i> Book Your Consultation</h3>
          <p>Select a time that works best for you. After booking, you'll receive a confirmation email with meeting details.</p>

          <!-- Embedded Google Calendar Scheduling -->
          <div id="calendarEmbed" style="margin: 20px 0;">
            <iframe
              src="https://calendar.google.com/calendar/appointments/schedules/AcZssZ3z9jPLqPQqPQ?gv=true"
              style="border: 0; width: 100%; height: 400px; border-radius: 10px;"
              frameborder="0"
              loading="lazy">
            </iframe>
          </div>

          <p style="font-size: 13px; color: #666; margin-top: 10px;">
            <i class="fas fa-info-circle"></i> Can't see the calendar?
            <a href="https://calendar.google.com/calendar/u/0/appointments/schedules/AcZssZ3z9jPLqPQqPQ" target="_blank" style="color: #667eea;">
              Click here to open in a new window
            </a>
          </p>

          <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap; justify-content: center;">
            <a href="tel:+17722089646" class="calendar-button" style="background: #10b981;">
              <i class="fas fa-phone"></i> Call Now: 772-208-9646
            </a>
            <a href="sms:+17722089646?body=Hi! I'm interested in learning more about your services." class="calendar-button" style="background: #3b82f6;">
              <i class="fas fa-sms"></i> Text Us
            </a>
          </div>
        </div>

        <div class="working-hours">
          <p><i class="fas fa-business-time"></i> <strong>Our Working Hours:</strong></p>
          <p style="margin-top: 10px;">
            <i class="far fa-calendar-check"></i> Monday - Friday: 9:00 AM - 6:00 PM EST<br>
            <i class="far fa-calendar-check"></i> Saturday: 10:00 AM - 4:00 PM EST<br>
            <i class="far fa-calendar-times"></i> Sunday: Closed
          </p>
          <p style="margin-top: 15px; font-style: italic; color: #666;">
            <i class="fas fa-info-circle"></i> After submitting the form, you'll receive a confirmation email with scheduling options.
          </p>
        </div>

        <!-- Contact Cards -->
        <div style="margin-top: 25px;">
          <h3 style="color: #333; margin-bottom: 15px; font-size: 16px;"><i class="fas fa-headset" style="color: #667eea;"></i> Contact Divisions</h3>
          <div style="display: grid; gap: 10px;">
            <div style="background: #f0fdf4; padding: 12px; border-radius: 8px; border-left: 3px solid #10b981;">
              <strong style="color: #10b981;">HRI Insurance</strong><br>
              <small style="color: #666;">paul@hriinsurance.com</small>
            </div>
            <div style="background: #fefce8; padding: 12px; border-radius: 8px; border-left: 3px solid #f59e0b;">
              <strong style="color: #f59e0b;">Flo Faction Insurance</strong><br>
              <small style="color: #666;">flofaction.insurance@gmail.com</small>
            </div>
            <div style="background: #eef2ff; padding: 12px; border-radius: 8px; border-left: 3px solid #6366f1;">
              <strong style="color: #6366f1;">Business Services</strong><br>
              <small style="color: #666;">flofaction.business@gmail.com</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
    import { getFirestore, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyA3QHuIxBpwCzDYJcvlm5yBBCh_z1LD-pM",
      authDomain: "flofaction-website-44132480.firebaseapp.com",
      projectId: "flofaction-website-44132480",
      storageBucket: "flofaction-website-44132480.firebasestorage.app",
      messagingSenderId: "918369970046",
      appId: "1:918369970046:web:1234567890abcdef"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Service descriptions with icons
    const serviceData = {
      // HRI Insurance Products
      'auto-insurance': {
        icon: 'üöó',
        description: 'Get comprehensive auto insurance coverage at competitive rates. We work with 7+ major carriers to find you the best protection for your vehicle.',
        division: 'hri',
        fields: ['vehicles', 'drivers']
      },
      'home-insurance': {
        icon: 'üè†',
        description: 'Protect your home and belongings with our comprehensive homeowners insurance. Coverage options for every budget and need.',
        division: 'hri',
        fields: ['property']
      },
      'property-casualty': {
        icon: 'üè¢',
        description: 'Business property and casualty coverage to protect your commercial assets. Tailored solutions for businesses of all sizes.',
        division: 'hri',
        fields: ['business']
      },
      'renters-insurance': {
        icon: 'üîë',
        description: 'Affordable renters insurance to protect your personal belongings and provide liability coverage.',
        division: 'hri',
        fields: []
      },
      'umbrella-insurance': {
        icon: '‚òÇÔ∏è',
        description: 'Extra liability protection beyond your existing policies. Peace of mind for high-value assets.',
        division: 'hri',
        fields: []
      },

      // Flo Faction Insurance Products
      'life-insurance': {
        icon: '‚ù§Ô∏è',
        description: 'Protect your family\'s financial future with life insurance. Term, whole life, and IUL options available.',
        division: 'flofaction',
        fields: ['coverage', 'beneficiaries']
      },
      'health-insurance': {
        icon: 'üè•',
        description: 'Navigate the ACA Marketplace with expert guidance. Find affordable health coverage that fits your needs and budget.',
        division: 'flofaction',
        fields: ['health']
      },
      'medicare': {
        icon: 'üë¥',
        description: 'Medicare Advantage, Supplement, and Part D plans explained. Let us help you choose the right Medicare option.',
        division: 'flofaction',
        fields: ['medicare']
      },
      'disability-insurance': {
        icon: 'üõ°Ô∏è',
        description: 'Protect your income if you\'re unable to work. Short-term and long-term disability coverage options.',
        division: 'flofaction',
        fields: ['income']
      },
      'supplemental-insurance': {
        icon: '‚ûï',
        description: 'Fill gaps in your existing coverage with supplemental insurance products like critical illness and accident coverage.',
        division: 'flofaction',
        fields: []
      },

      // Wealth Management
      'financial-planning': {
        icon: 'üìä',
        description: 'Comprehensive financial planning to help you achieve your goals. Budget analysis, debt management, and wealth building strategies.',
        division: 'wealth',
        fields: ['financial']
      },
      'investment-strategies': {
        icon: 'üìà',
        description: 'Personalized investment strategies to grow your wealth. Risk assessment and portfolio optimization.',
        division: 'wealth',
        fields: ['investment']
      },
      'retirement-planning': {
        icon: 'üéØ',
        description: 'Plan for a secure retirement with 401k, IRA, and pension optimization strategies.',
        division: 'wealth',
        fields: ['retirement']
      },
      'portfolio-management': {
        icon: 'üíº',
        description: 'Active portfolio management to maximize returns while managing risk. Regular rebalancing and performance monitoring.',
        division: 'wealth',
        fields: ['investment']
      },
      'legacy-planning': {
        icon: 'üèõÔ∏è',
        description: 'Create a lasting legacy with estate planning, trusts, and wealth transfer strategies.',
        division: 'wealth',
        fields: ['estate']
      },

      // Digital Services
      'web-development': {
        icon: 'üíª',
        description: 'Custom website design and development. Modern, responsive, and optimized for performance.',
        division: 'digital',
        fields: ['project']
      },
      'software-development': {
        icon: '‚öôÔ∏è',
        description: 'Custom software solutions for your business needs. Web apps, mobile apps, and integrations.',
        division: 'digital',
        fields: ['project']
      },
      'creative-services': {
        icon: 'üé®',
        description: 'Professional design, video production, and content creation services.',
        division: 'digital',
        fields: ['project']
      },
      'brand-development': {
        icon: '‚ú®',
        description: 'Complete brand identity development including logo, colors, messaging, and brand guidelines.',
        division: 'digital',
        fields: ['project']
      },

      // AI & Automation
      'ai-automation': {
        icon: 'ü§ñ',
        description: 'Automate your business processes with AI-powered solutions. Increase efficiency and reduce manual work.',
        division: 'ai',
        fields: ['automation']
      },
      'voice-ai': {
        icon: 'üéôÔ∏è',
        description: 'Deploy intelligent voice AI agents for customer support and sales. 24/7 availability with human-like interactions.',
        division: 'ai',
        fields: ['automation']
      },
      'crm-integration': {
        icon: 'üîó',
        description: 'Connect and optimize your CRM with custom integrations. HubSpot, Salesforce, and custom solutions.',
        division: 'ai',
        fields: ['automation']
      },

      // Other
      'emergency': {
        icon: 'üö®',
        description: 'Need immediate assistance? Our emergency consultation service provides fast, expert guidance when you need it most.',
        division: 'other',
        fields: []
      },
      'other': {
        icon: '‚ùì',
        description: 'Have a different question or need? Tell us about it and we\'ll connect you with the right expert.',
        division: 'other',
        fields: []
      }
    };

    // Dynamic field templates
    const fieldTemplates = {
      vehicles: `
        <div class="field-group">
          <h4><i class="fas fa-car"></i> Vehicle Information</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="vehicleYear">Year</label>
              <input type="number" id="vehicleYear" name="vehicleYear" placeholder="2024" min="1900" max="2030">
            </div>
            <div class="form-group">
              <label for="vehicleMake">Make</label>
              <input type="text" id="vehicleMake" name="vehicleMake" placeholder="Toyota">
            </div>
          </div>
          <div class="form-group">
            <label for="vehicleModel">Model</label>
            <input type="text" id="vehicleModel" name="vehicleModel" placeholder="Camry">
          </div>
        </div>
      `,
      drivers: `
        <div class="field-group">
          <h4><i class="fas fa-id-card"></i> Driver Information</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="driversCount">Number of Drivers</label>
              <select id="driversCount" name="driversCount">
                <option value="1">1 Driver</option>
                <option value="2">2 Drivers</option>
                <option value="3">3 Drivers</option>
                <option value="4+">4+ Drivers</option>
              </select>
            </div>
            <div class="form-group">
              <label for="drivingRecord">Driving Record</label>
              <select id="drivingRecord" name="drivingRecord">
                <option value="clean">Clean Record</option>
                <option value="minor">Minor Violations</option>
                <option value="accident">Recent Accident</option>
              </select>
            </div>
          </div>
        </div>
      `,
      property: `
        <div class="field-group">
          <h4><i class="fas fa-home"></i> Property Details</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="propertyType">Property Type</label>
              <select id="propertyType" name="propertyType">
                <option value="single-family">Single Family Home</option>
                <option value="condo">Condo/Townhouse</option>
                <option value="multi-family">Multi-Family</option>
                <option value="mobile">Mobile Home</option>
              </select>
            </div>
            <div class="form-group">
              <label for="propertyValue">Estimated Value</label>
              <select id="propertyValue" name="propertyValue">
                <option value="under-200k">Under $200,000</option>
                <option value="200k-400k">$200,000 - $400,000</option>
                <option value="400k-600k">$400,000 - $600,000</option>
                <option value="600k-1m">$600,000 - $1,000,000</option>
                <option value="over-1m">Over $1,000,000</option>
              </select>
            </div>
          </div>
        </div>
      `,
      coverage: `
        <div class="field-group">
          <h4><i class="fas fa-shield-alt"></i> Coverage Preferences</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="coverageAmount">Coverage Amount Needed</label>
              <select id="coverageAmount" name="coverageAmount">
                <option value="100k-250k">$100,000 - $250,000</option>
                <option value="250k-500k">$250,000 - $500,000</option>
                <option value="500k-1m">$500,000 - $1,000,000</option>
                <option value="1m-2m">$1,000,000 - $2,000,000</option>
                <option value="over-2m">Over $2,000,000</option>
              </select>
            </div>
            <div class="form-group">
              <label for="policyType">Policy Type Interest</label>
              <select id="policyType" name="policyType">
                <option value="term">Term Life</option>
                <option value="whole">Whole Life</option>
                <option value="iul">Indexed Universal Life (IUL)</option>
                <option value="unsure">Not Sure - Need Guidance</option>
              </select>
            </div>
          </div>
        </div>
      `,
      health: `
        <div class="field-group">
          <h4><i class="fas fa-heartbeat"></i> Health Coverage Needs</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="householdSize">Household Size</label>
              <select id="householdSize" name="householdSize">
                <option value="1">Just Me</option>
                <option value="2">2 People</option>
                <option value="3-4">3-4 People</option>
                <option value="5+">5+ People</option>
              </select>
            </div>
            <div class="form-group">
              <label for="currentCoverage">Current Coverage</label>
              <select id="currentCoverage" name="currentCoverage">
                <option value="none">No Current Coverage</option>
                <option value="employer">Employer Coverage (Leaving)</option>
                <option value="individual">Individual Plan</option>
                <option value="cobra">COBRA</option>
              </select>
            </div>
          </div>
        </div>
      `,
      medicare: `
        <div class="field-group">
          <h4><i class="fas fa-user-md"></i> Medicare Information</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="medicareStatus">Medicare Status</label>
              <select id="medicareStatus" name="medicareStatus">
                <option value="turning-65">Turning 65 Soon</option>
                <option value="already-enrolled">Already on Medicare</option>
                <option value="disability">Disability Medicare</option>
                <option value="researching">Just Researching</option>
              </select>
            </div>
            <div class="form-group">
              <label for="medicareInterest">Interest In</label>
              <select id="medicareInterest" name="medicareInterest">
                <option value="advantage">Medicare Advantage</option>
                <option value="supplement">Medicare Supplement</option>
                <option value="part-d">Part D (Prescription)</option>
                <option value="all">Review All Options</option>
              </select>
            </div>
          </div>
        </div>
      `,
      income: `
        <div class="field-group">
          <h4><i class="fas fa-dollar-sign"></i> Income Protection</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="occupation">Occupation</label>
              <input type="text" id="occupation" name="occupation" placeholder="Your job title">
            </div>
            <div class="form-group">
              <label for="annualIncome">Annual Income Range</label>
              <select id="annualIncome" name="annualIncome">
                <option value="under-50k">Under $50,000</option>
                <option value="50k-100k">$50,000 - $100,000</option>
                <option value="100k-200k">$100,000 - $200,000</option>
                <option value="over-200k">Over $200,000</option>
              </select>
            </div>
          </div>
        </div>
      `,
      financial: `
        <div class="field-group">
          <h4><i class="fas fa-chart-pie"></i> Financial Goals</h4>
          <div class="form-group">
            <label>What are your primary goals? (Select all that apply)</label>
            <div class="option-cards" style="margin-top: 10px;">
              <div class="option-card" data-value="debt">
                <i class="fas fa-credit-card"></i>
                <span>Pay Off Debt</span>
              </div>
              <div class="option-card" data-value="save">
                <i class="fas fa-piggy-bank"></i>
                <span>Build Savings</span>
              </div>
              <div class="option-card" data-value="invest">
                <i class="fas fa-chart-line"></i>
                <span>Start Investing</span>
              </div>
              <div class="option-card" data-value="retire">
                <i class="fas fa-umbrella-beach"></i>
                <span>Plan Retirement</span>
              </div>
            </div>
            <input type="hidden" id="financialGoals" name="financialGoals">
          </div>
        </div>
      `,
      investment: `
        <div class="field-group">
          <h4><i class="fas fa-coins"></i> Investment Profile</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="investmentExperience">Investment Experience</label>
              <select id="investmentExperience" name="investmentExperience">
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="experienced">Experienced</option>
              </select>
            </div>
            <div class="form-group">
              <label for="riskTolerance">Risk Tolerance</label>
              <select id="riskTolerance" name="riskTolerance">
                <option value="conservative">Conservative</option>
                <option value="moderate">Moderate</option>
                <option value="aggressive">Aggressive</option>
              </select>
            </div>
          </div>
        </div>
      `,
      retirement: `
        <div class="field-group">
          <h4><i class="fas fa-umbrella-beach"></i> Retirement Goals</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="retirementAge">Target Retirement Age</label>
              <input type="number" id="retirementAge" name="retirementAge" placeholder="65" min="50" max="80">
            </div>
            <div class="form-group">
              <label for="currentSavings">Current Retirement Savings</label>
              <select id="currentSavings" name="currentSavings">
                <option value="none">Just Starting</option>
                <option value="under-100k">Under $100,000</option>
                <option value="100k-500k">$100,000 - $500,000</option>
                <option value="over-500k">Over $500,000</option>
              </select>
            </div>
          </div>
        </div>
      `,
      estate: `
        <div class="field-group">
          <h4><i class="fas fa-landmark"></i> Estate Planning Needs</h4>
          <div class="form-group">
            <label>What documents do you need? (Select all that apply)</label>
            <div class="option-cards" style="margin-top: 10px;">
              <div class="option-card" data-value="will">
                <i class="fas fa-file-contract"></i>
                <span>Will</span>
              </div>
              <div class="option-card" data-value="trust">
                <i class="fas fa-university"></i>
                <span>Trust</span>
              </div>
              <div class="option-card" data-value="poa">
                <i class="fas fa-gavel"></i>
                <span>Power of Attorney</span>
              </div>
              <div class="option-card" data-value="beneficiary">
                <i class="fas fa-users"></i>
                <span>Beneficiary Review</span>
              </div>
            </div>
            <input type="hidden" id="estateNeeds" name="estateNeeds">
          </div>
        </div>
      `,
      project: `
        <div class="field-group">
          <h4><i class="fas fa-tasks"></i> Project Details</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="projectTimeline">Project Timeline</label>
              <select id="projectTimeline" name="projectTimeline">
                <option value="asap">ASAP</option>
                <option value="1-month">Within 1 Month</option>
                <option value="2-3-months">2-3 Months</option>
                <option value="flexible">Flexible</option>
              </select>
            </div>
            <div class="form-group">
              <label for="projectBudget">Budget Range</label>
              <select id="projectBudget" name="projectBudget">
                <option value="under-5k">Under $5,000</option>
                <option value="5k-15k">$5,000 - $15,000</option>
                <option value="15k-50k">$15,000 - $50,000</option>
                <option value="over-50k">Over $50,000</option>
              </select>
            </div>
          </div>
        </div>
      `,
      automation: `
        <div class="field-group">
          <h4><i class="fas fa-cogs"></i> Automation Needs</h4>
          <div class="form-group">
            <label>What would you like to automate?</label>
            <div class="option-cards" style="margin-top: 10px;">
              <div class="option-card" data-value="customer-service">
                <i class="fas fa-headset"></i>
                <span>Customer Service</span>
              </div>
              <div class="option-card" data-value="lead-gen">
                <i class="fas fa-user-plus"></i>
                <span>Lead Generation</span>
              </div>
              <div class="option-card" data-value="email">
                <i class="fas fa-envelope"></i>
                <span>Email Campaigns</span>
              </div>
              <div class="option-card" data-value="workflow">
                <i class="fas fa-project-diagram"></i>
                <span>Workflows</span>
              </div>
            </div>
            <input type="hidden" id="automationNeeds" name="automationNeeds">
          </div>
        </div>
      `,
      business: `
        <div class="field-group">
          <h4><i class="fas fa-briefcase"></i> Business Information</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="businessType">Business Type</label>
              <input type="text" id="businessType" name="businessType" placeholder="Restaurant, Contractor, etc.">
            </div>
            <div class="form-group">
              <label for="employeeCount">Number of Employees</label>
              <select id="employeeCount" name="employeeCount">
                <option value="1">Just Me</option>
                <option value="2-5">2-5</option>
                <option value="6-20">6-20</option>
                <option value="20+">20+</option>
              </select>
            </div>
          </div>
        </div>
      `,
      beneficiaries: `
        <div class="field-group">
          <h4><i class="fas fa-users"></i> Beneficiary Information</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="dependents">Number of Dependents</label>
              <select id="dependents" name="dependents">
                <option value="0">None</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3+">3 or more</option>
              </select>
            </div>
            <div class="form-group">
              <label for="maritalStatus">Marital Status</label>
              <select id="maritalStatus" name="maritalStatus">
                <option value="single">Single</option>
                <option value="married">Married</option>
                <option value="divorced">Divorced</option>
                <option value="widowed">Widowed</option>
              </select>
            </div>
          </div>
        </div>
      `
    };

    // DOM Elements
    const form = document.getElementById('intakeForm');
    const serviceType = document.getElementById('serviceType');
    const serviceDescription = document.getElementById('serviceDescription');
    const descriptionText = document.getElementById('descriptionText');
    const dynamicFields = document.getElementById('dynamicFields');
    const successMessage = document.getElementById('successMessage');
    const errorMessage = document.getElementById('errorMessage');
    const errorText = document.getElementById('errorText');
    const submitBtn = document.getElementById('submitBtn');
    const submitText = document.getElementById('submitText');
    const submitSpinner = document.getElementById('submitSpinner');
    const tierBadge = document.getElementById('tierBadge');

    // Check for tier parameter in URL
    const urlParams = new URLSearchParams(window.location.search);
    const tier = urlParams.get('tier');
    if (tier) {
      tierBadge.style.display = 'inline-block';
      tierBadge.className = 'tier-badge tier-' + tier;
      const tierNames = {
        'essentials': 'Essentials Tier',
        'premium': 'Premium Tier',
        'elite': 'Elite Tier',
        'enterprise': 'Enterprise Tier'
      };
      tierBadge.textContent = tierNames[tier] || tier;
    }

    // Handle service type change
    serviceType.addEventListener('change', (e) => {
      const value = e.target.value;
      const data = serviceData[value];

      if (data) {
        // Show description with animation
        const iconSpan = serviceDescription.querySelector('.service-icon');
        iconSpan.textContent = data.icon;
        descriptionText.textContent = data.description;
        serviceDescription.classList.add('show');

        // Build dynamic fields
        let fieldsHTML = '';
        if (data.fields && data.fields.length > 0) {
          fieldsHTML = '<h3><i class="fas fa-clipboard-list"></i> Additional Information</h3>';
          data.fields.forEach(field => {
            if (fieldTemplates[field]) {
              fieldsHTML += fieldTemplates[field];
            }
          });
        }

        if (fieldsHTML) {
          dynamicFields.innerHTML = fieldsHTML;
          dynamicFields.classList.add('show');

          // Initialize option card click handlers
          initializeOptionCards();
        } else {
          dynamicFields.classList.remove('show');
          dynamicFields.innerHTML = '';
        }
      } else {
        serviceDescription.classList.remove('show');
        dynamicFields.classList.remove('show');
        dynamicFields.innerHTML = '';
      }
    });

    // Initialize option card click handlers
    function initializeOptionCards() {
      document.querySelectorAll('.option-card').forEach(card => {
        card.addEventListener('click', function() {
          this.classList.toggle('selected');

          // Update hidden input
          const parent = this.closest('.form-group');
          const hiddenInput = parent.querySelector('input[type="hidden"]');
          if (hiddenInput) {
            const selectedCards = parent.querySelectorAll('.option-card.selected');
            const values = Array.from(selectedCards).map(c => c.dataset.value);
            hiddenInput.value = values.join(',');
          }
        });
      });
    }

    // Form submission
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Reset messages
      successMessage.style.display = 'none';
      errorMessage.style.display = 'none';

      // Show loading state
      submitBtn.disabled = true;
      submitText.textContent = 'Submitting...';
      submitSpinner.style.display = 'inline-block';

      const formData = new FormData(form);
      const payload = {
        serviceType: formData.get('serviceType'),
        firstName: formData.get('firstName'),
        lastName: formData.get('lastName'),
        email: formData.get('email'),
        phone: formData.get('phone') || '',
        dateOfBirth: formData.get('dateOfBirth') || '',
        contactPreference: formData.get('contactPreference') || 'email',
        message: formData.get('message') || '',
        submittedFrom: window.location.href,
        product_type: formData.get('serviceType'),
        source_page: window.location.pathname,
        tier: tier || 'none',
        // Collect all dynamic fields
        additionalData: {}
      };

      // Collect additional form data from dynamic fields
      const dynamicInputs = dynamicFields.querySelectorAll('input, select');
      dynamicInputs.forEach(input => {
        if (input.name && input.value) {
          payload.additionalData[input.name] = input.value;
        }
      });

      try {
        const response = await fetch('https://us-central1-flofaction-website-44132480.cloudfunctions.net/submitIntake', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(payload)
        });

        const data = await response.json();

        if (data.success) {
          successMessage.style.display = 'block';
          form.reset();
          serviceDescription.classList.remove('show');
          dynamicFields.classList.remove('show');
          dynamicFields.innerHTML = '';
          successMessage.scrollIntoView({ behavior: 'smooth' });
        } else {
          errorText.textContent = data.error || 'There was an error submitting your form. Please try again.';
          errorMessage.style.display = 'block';
        }
      } catch (error) {
        console.error('Form submission error:', error);
        errorText.textContent = error.message || 'There was an error submitting your form. Please try again.';
        errorMessage.style.display = 'block';
      } finally {
        submitBtn.disabled = false;
        submitText.textContent = 'Submit & Schedule Appointment';
        submitSpinner.style.display = 'none';
      }
    });
  </script>
  <script src="js/navigation.js"></script>
  <script src="js/cart.js"></script>

  <!-- Autonomous AI Chat Widget -->
  <script src="js/ai-chat-widget.js"></script>

  <!-- ElevenLabs Voice Agent Widget -->
  <script>
    // Initialize voice agent widget if available
    if (typeof elevenlabs !== 'undefined') {
      console.log('ElevenLabs Voice Widget Ready');
    }
  </script>
</body>
</html>
